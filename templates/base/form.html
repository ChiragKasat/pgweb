{%extends "base/page.html"%}
{%block title%}{{operation|default:"Edit"}} {{formitemtype}}{%endblock%}
{%block contents%}
<h1>{{operation|default:"Edit"}} {{formitemtype}}</h1>
<form method="post" action=".">
{%if form_intro%}
<p>
{{form_intro|safe}}
</p>
{%endif%}

<table class="pgGenericFormTable">
{%if form.errors%}
 <tr class="errorheader">
  <td colspan="2">Please correct the errors below, and re-submit the form.</td>
 </tr>
{%endif%}
{%for field in form%}
 {%if field.errors %}
 <tr class="error">
  <td colspan="2">{{field.errors.as_ul}}</td>
 </tr>
 {%endif%}
 <tr {%if field.errors%}class="errorinfo"{%endif%}>
  <th>{{field.label_tag}}{%if field.help_text %}<br/>
   <span class="formfieldhelp">{{field.help_text}}</span>{%endif%}</th>
  <td>{{field}}</td>
 </tr>
{%endfor%}
</table>
<input type="submit" value="{{savebutton|default:"Save"}}" />
</form>
{%endblock%}

{% block extrahead %}
{{ block.super }}
{%if markdownfields%}
<link rel="stylesheet" type="text/css" href="/media/css/showdown_preview.css" />
<script type="text/javascript" src="/media/showdown/showdown.js"></script>
<script type="text/javascript" src="/media/js/showdown_preview.js"></script>
<script language="javascript">
   window.onload = function() {
      {%for mdf in markdownfields %}
         attach_showdown_preview('id_{{mdf}}', 0);
      {%endfor%}
   }
</script>
{%endif%}
{%endblock%}

